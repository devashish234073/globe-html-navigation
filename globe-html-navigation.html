<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Earth with Coordinates</title>
    <script src="https://threejs.org/build/three.js"></script>
</head>
<body>
    <script>
        // Set up the scene
        const scene = new THREE.Scene();

        // Set up the camera
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 5;

        // Set up the renderer
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Create a sphere (Earth)
        let radius = 3;
        const geometry = new THREE.SphereGeometry(radius, 32, 32);
        const textureLoader = new THREE.TextureLoader();
        const texture = textureLoader.load('https://threejsfundamentals.org/threejs/resources/images/wall.jpg'); // You can replace this with your Earth texture
        //const material = new THREE.MeshBasicMaterial({ map: texture });
        const material = new THREE.MeshBasicMaterial({ color: 0xaaaf00 });
        const earth = new THREE.Mesh(geometry, material);
        scene.add(earth);

        // Create a wireframe mesh
        const wireframeGeometry = new THREE.WireframeGeometry(geometry);
        const wireframeMaterial = new THREE.LineBasicMaterial({ color: 0xffffff, linewidth: 2 });
        const wireframe = new THREE.LineSegments(wireframeGeometry, wireframeMaterial);
        earth.add(wireframe);

        // Function to add a point based on latitude and longitude
        function addPoint(latitude, longitude, cityPointSize, color) {
            const phi = (90 - latitude) * Math.PI / 180;
            const theta = (180 - longitude) * Math.PI / 180;

            const x = radius * Math.sin(phi) * Math.cos(theta);
            const y = radius * Math.cos(phi);
            const z = radius * Math.sin(phi) * Math.sin(theta);

            const pointGeometry = new THREE.SphereGeometry(cityPointSize);
            const pointMaterial = new THREE.MeshBasicMaterial(color);
            const point = new THREE.Mesh(pointGeometry, pointMaterial);
            point.position.set(x, y, z);

            // Add the point as a child of the Earth mesh
            earth.add(point);
        }

        // Example points
        let dotOnBorder = 0.005;
        let cityPointSize = 0.01;
        let citiesToPlot = [
            [37.7749, -122.4194],// San Francisco
            [40.7128, -74.0060],// New York
            [15.2993, 74.1240],//goa
            [28.7041, 77.1025],//delhi
            [22.5726, 88.3639],//kolkata
            [17.4065, 78.4772],//hyderabad
            [13.0827, 80.2707],//chennai
            [34.0837, 74.7973],//srinagar
            [23.0225, 72.5714],//ahmedabad
            [26.1433, 91.7898], //dispur
        ];
        citiesToPlot.forEach((coords)=>{
            addPoint(coords[0],coords[1],cityPointSize, { color: 0x0000ff });
        });
        //Boundaries or Beaches
        let beachesOrBorderToPlot = [
            [8.19747, 77.22431],//paraikal beach
            [8.126215, 77.319641],//muttom beach
            [8.12678, 77.35066],//lemur beach
            [8.11030, 77.39718],//Pozhikarai beach park
            [8.08990, 77.48301],//manakudi beach
            [8.07937, 77.53176],//sunset point kanyakumari
            [8.08820, 77.55562],//kanyakumari beach
            [8.13885, 77.57572],//Rasthakadu Beach
            [8.15533, 77.62034],//Chettikulam Beach
            [8.16264, 77.66034],//Panjal Beach
            [8.16366, 77.68094],//Koodan Kulam Beach
            [8.21820, 77.78101],//St Quiteria Shrine KuthenKuly
            [8.26237, 77.84402],//Sri Moogambigai Siddha Vaithiya Salai, Semponvilai
            [8.28174, 77.89431],//Uvari Beach
            [8.30178, 77.92675],//Kooduthalai
            [8.32641, 77.96040],//Thopuvilai Beach
            [8.37735, 78.05913],//Manapad Fish Market
            [8.39702, 78.05867],//Kulashekarapatanam Beach
            [8.44622, 78.08396],//Kallamozhi Beach
            [8.48717, 78.12188],//Tiruchendur Beach
            [8.49633, 78.12941],//Thiruchendur Murugan Temple
            [8.56201, 78.13240],//Kayalpatnam Beach
            [8.57189, 78.13428],//Singithurai Beach
            [8.58232, 78.13657],//Kombuthurai Beach
            [8.63886, 78.12746],//Punnakayal Beach
            [8.69351, 78.13666],//Sri Mottayasamy Sri Kayakari
            [8.72781, 78.15751],//Mullakkadu Beach
            [8.78893, 78.19402],//Hare island Beach
            [8.80816, 78.16262],//Muthu Nagar New Beach
            [8.81575, 78.16316],//Therespuram Fishery
            [8.83473, 78.16519],//Thlamuthunagar Beach
            [8.85819, 78.16649],//Athisaya Kadal Matha Church
            [8.88891, 78.17389],//Tharuvaikulam fishing harbour
            [8.92081, 78.18450],//Pattanamarudur Beach view point
            [8.95482, 78.20653],//Aqua Outback Resort and Watersports Academy
            [8.96661, 78.21544],//Panaiyur Beach
            [8.99277, 78.24914],//Sippikulam Beach
            [8.99785, 78.25662],//Keelavaipar Beach
            [9.01719, 78.28721],//Kalaignanapuram Beach
            [9.06038, 78.34563],//Sea Palm Inn
            [9.07665, 78.36512],//Vembar Beach
            [9.08857, 78.37771],//Suganya Beach
            [9.10218, 78.39679],//Beach Point
            [9.10986, 78.40821],//Velayuthapuram beautiful beach
            [9.12123, 78.43888],//Sea land Resort
            [9.12806, 78.47865],//AW SEA FOOD
            [9.13826, 78.53359],//Mariyur Fishing Market
            [9.13869, 78.58581],//Keelamunthal fish market , keelamunthal
            [9.15526, 78.62958],//Valinokkam Beach
            [9.20212, 78.71979],//Ervadi Beach
            [9.24256, 78.82245],//Pakkirapa Sea Park
            [9.27712, 78.96933],//Valangapuri beach
            [9.29413, 79.26411],//Ocean paradise Beach Resort & Sea Food Restaurant
            [9.37093, 78.97415],//Alagankulam Beach
            [9.43721, 78.91912],//Mudiveeran Beach
            [9.49811, 78.90969],//Saltpan
            [9.54455, 78.91806],//Beach Mosque
            [9.55205, 78.91986],//Kaliyamman Kovil
            [9.57556, 78.92559],//Uppur 
            [9.58737, 78.92700],//L&T bridge
        ];
        beachesOrBorderToPlot.forEach((coords)=>{
            addPoint(coords[0],coords[1],dotOnBorder, { color: 0x000000 });
        });
        //reference doc --> https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/getCurrentPosition
        setInterval(function() {
            navigator.geolocation.getCurrentPosition(geoSuccess, geoError);
        }, 1000);

        function geoSuccess(pos) {
          const crd = pos.coords;
          addPoint(crd.latitude, crd.longitude, 0.03, { color: 0xff00ff });
        }

        function geoError(error) {
            console.log(error);
        }

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);

            // Rotate the Earth
            earth.rotation.y += 0.007;

            renderer.render(scene, camera);
        }

        animate();
    </script>
</body>
</html>
